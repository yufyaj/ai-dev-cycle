# フォーム営業管理システム

### 1. 背景と目的

#### 1.1 背景

現状、フォーム営業の進捗管理が分散しており、企業側がリアルタイムで状況を把握することが困難である。また、営業活動データが集約されていないため、効果的な分析やAI活用が難しい状況にある。

#### 1.2 目的

本システムは以下を目的とする：

- **工数削減**: 営業活動の記録・管理を一元化し、手作業による管理工数を削減する
- **リアルタイム進捗管理**: 企業が営業活動の進捗をリアルタイムで可視化できる環境を提供する
- **データ集約による分析強化**: 営業活動データを集約し、返信率・成約率などの分析を可能にする
- **AI活用の基盤構築**: 集約されたデータを活用し、将来的なAI活用の基盤を整備する

### 2. スコープ

#### 2.1 スコープIn（初期リリースに含む）

- ユーザー認証・権限管理（ワーカー、企業、管理者の3ロール）
- 営業リスト管理（CSV一括登録、手動登録、リスト内重複チェック）
- 営業活動・進捗管理（送信、返信、アポ獲得の記録）
- 返信管理（フォームからの返信記録・管理）
- 進捗ダッシュボード（リアルタイム表示）
- 分析レポート機能（返信率、成約率、時間帯別、曜日別）
- データエクスポート（CSV形式）
- アプリ内通知機能
- モバイル対応（レスポンシブWeb）

#### 2.2 スコープOut（初期リリースに含まない）

- 送信文章テンプレート機能・変数置換
- 承認フロー（企業による送信内容・リスト事前承認）
- 外部CRM連携
- 監査ログ機能
- フォーム送信自動化
- SSO・多要素認証
- A/Bテスト機能
- プッシュ通知（メール・SMS等）

---

## 3. ユーザー認証・権限管理

### 概要

システムにログインし、ロールに応じた機能へアクセスできる。ロールは「ワーカー」「企業」「管理者」の3種類。

### Acceptance Criteria

#### 正常系

- **Given**: 登録済みのワーカーユーザー
- **When**: ID/パスワードでログイン
- **Then**: ワーカー専用のダッシュボード画面に遷移し、自分に割り振られたリストと進捗入力画面が表示される

#### 異常系

- **Given**: 未登録のID/パスワードでログイン試行
- **When**: ログインボタンを押下
- **Then**: 「IDまたはパスワードが正しくありません」と表示され、ログインできない

---

## 4. 営業リスト管理

### 概要

管理者が営業リストを登録し、ワーカーへ割り振る。リストはCSV一括登録または手動登録が可能。1リストあたり最大10,000件まで登録でき、リスト内の重複をチェックする。

### Acceptance Criteria

#### 正常系

- **Given**: 管理者が5,000件の営業先を含むCSVファイルを準備
- **When**: CSVアップロード機能でファイルを登録し、ワーカーに割り振り
- **Then**: リストが正常に登録され、割り振られたワーカーが自分のダッシュボードでリストを確認できる

#### 異常系

- **Given**: 管理者が10,001件の営業先を含むCSVファイルをアップロード
- **When**: アップロードを実行
- **Then**: 「1リストあたりの上限（10,000件）を超えています」と表示され、登録されない

---

## 5. 営業活動・進捗管理

### 概要

ワーカーは割り振られたリストから営業先を選択し、フォーム送信用の情報をコピーして外部のフォームへ手動送信する。送信後、システムに進捗（送信完了、返信あり、アポ獲得）を入力する。

### Acceptance Criteria

#### 正常系

- **Given**: ワーカーが割り振られたリストから営業先を選択
- **When**: 営業先情報をコピーし、外部フォームへ送信後、システムで「送信完了」を記録
- **Then**: 該当営業先のステータスが「送信済」に更新され、進捗ダッシュボードに反映される

#### 異常系

- **Given**: ワーカーが自分に割り振られていないリストの営業先
- **When**: 進捗入力を試みる
- **Then**: 「この営業先へのアクセス権限がありません」と表示され、入力できない

---

## 6. 返信管理

### 概要

フォームからの返信情報を記録・管理する。ワーカーが返信内容を入力し、ステータスを更新できる。

### Acceptance Criteria

#### 正常系

- **Given**: ワーカーが送信済みの営業先から返信を受領
- **When**: 返信内容とステータス（例：「返信あり」「アポ獲得」）を入力
- **Then**: 該当営業先のステータスが更新され、企業ダッシュボードにも反映される

#### 異常系

- **Given**: ワーカーが「送信済」ステータスでない営業先
- **When**: 返信情報を入力しようとする
- **Then**: 「まだ送信していない営業先です」と表示され、入力できない

---

## 7. 進捗ダッシュボード

### 概要

企業ユーザーがリアルタイムで営業活動の進捗を確認できるダッシュボード。送信件数、返信件数、アポ獲得数などの指標を表示する。

### Acceptance Criteria

#### 正常系

- **Given**: 企業ユーザーがログイン
- **When**: ダッシュボード画面を表示
- **Then**: 自社に紐づく全ての営業活動について、送信件数、返信件数、アポ獲得数がリアルタイムで表示される

#### 異常系

- **Given**: 企業ユーザーが他社のデータにアクセス試行
- **When**: URLパラメータ等で他社IDを指定
- **Then**: 「アクセス権限がありません」と表示され、データが表示されない

---

## 8. 分析レポート機能

### 概要

営業活動データを分析し、返信率、成約率、時間帯別・曜日別の効果を可視化する。企業はリアルタイムでの確認に加え、週次レポートとしても活用できる。

### Acceptance Criteria

#### 正常系

- **Given**: 企業が過去1ヶ月の営業活動データを蓄積
- **When**: 分析レポート画面で「時間帯別返信率」を選択
- **Then**: 時間帯ごとの返信率がグラフで表示され、どの時間帯が効果的かを確認できる

#### 異常系

- **Given**: データが存在しない期間
- **When**: 分析レポートを表示しようとする
- **Then**: 「該当期間のデータがありません」と表示され、空のグラフが表示される

---

## 9. データエクスポート

### 概要

営業リストや進捗データをCSV形式でエクスポートできる。企業・管理者がデータを外部で分析・保管する際に利用する。

### Acceptance Criteria

#### 正常系

- **Given**: 企業ユーザーが自社の営業活動データ（1,000件）を持つ
- **When**: データエクスポート機能でCSVダウンロードを実行
- **Then**: 全1,000件のデータがCSV形式でダウンロードされる

#### 異常系

- **Given**: ワーカーが自分に割り振られていないリストのデータ
- **When**: エクスポートを試みる
- **Then**: 「アクセス権限がありません」と表示され、エクスポートできない

---

## 10. アプリ内通知

### 概要

ワーカーや企業に対し、重要なイベント（例：新規リスト割り振り、返信受領、週次レポート作成完了など）をアプリ内で通知する。

### Acceptance Criteria

#### 正常系

- **Given**: 管理者がワーカーに新規リストを割り振り
- **When**: 割り振りが完了
- **Then**: 該当ワーカーのアプリ内通知に「新しいリストが割り振られました」と表示される

#### 異常系

- **Given**: 通知対象でないユーザー
- **When**: 他ユーザー向けの通知が発生
- **Then**: 通知は表示されず、無関係なユーザーには届かない

---

### 11. 非機能要件

#### 11.1 性能

- **応答時間**: 画面表示・データ取得のP95応答時間は3秒以内とする
- **スループット**: 同時接続50-100名を想定し、ピーク時でも性能劣化しない設計とする
- **リスト登録**: 10,000件のCSV一括登録は60秒以内に完了すること

#### 11.2 可用性

- **稼働率**: 目標99.9%（ただし、初期リリース時は多少の低下を許容）
- **バックアップ**: 日次バックアップを実施し、障害時は24時間以内に復旧可能とする
- **データ保持**: データは永続的に保持する（削除機能は提供しない）

#### 11.3 セキュリティ

- **認証**: ID/パスワード認証を実装（初期リリース時）
- **権限管理**: ロールベースアクセス制御（RBAC）により、ワーカー、企業、管理者の権限を厳格に分離
- **個人情報**: 営業リストに個人情報は含まれない前提（企業名・問い合わせ先等のみ）
- **通信**: HTTPS必須

#### 11.4 観測性

- **ログ**: アプリケーションログを記録し、エラー発生時にトレース可能にする
- **監視**: システム稼働状況をリアルタイムで監視し、異常検知時にアラート通知する
- **トレースID**: リクエストごとにトレースIDを付与し、ログ相関を可能にする

#### 11.5 モバイル対応

- **レスポンシブWeb**: スマートフォン・タブレットからアクセス可能なレスポンシブデザインを採用
- **UI/UX**: モバイル環境でも操作しやすいUI/UXを提供

#### 11.6 クラウド

- **インフラ**: クラウドサービスを利用（オンプレミスは使用しない）
- **コスト**: 運用コストを抑えつつ、高パフォーマンスを維持するバランスを重視

---

### 12. KPI

初期リリース時点では明確なKPIは未定義。今後、以下の候補から選定・設定を検討する：

- 月間送信件数
- 返信率向上（%）
- ワーカー1人あたりの生産性（送信件数/日、アポ獲得数/週など）
- システム利用率（アクティブユーザー率）
- データエクスポート利用頻度

---

### 13. リスクと制約

#### リスク

- **データ量増加**: 永続的にデータを保持するため、長期的にストレージコストが増大する可能性
- **外部フォーム依存**: フォーム送信を外部で手動実行するため、送信記録の正確性がワーカーの入力に依存
- **同時接続数**: 想定を超えるユーザーが同時アクセスした場合、性能劣化の可能性
- **多対多関係の複雑性**: 企業とワーカーの多対多関係により、権限管理・データ表示が複雑化する可能性

#### 制約

- **技術スタック**: クラウド利用が前提（オンプレミス不可）
- **認証方式**: 初期リリースはID/パスワードのみ（SSO・多要素認証は対象外）
- **送信自動化**: フォーム送信は手動（自動化は対象外）
- **リスト上限**: 1リストあたり最大10,000件
- **個人情報**: 営業リストに個人情報を含まない運用を前提

---

### 14. 用語集

| 用語 | 定義 |
|------|------|
| **フォーム営業** | 企業の問い合わせフォームを通じて営業活動を行う手法 |
| **ワーカー** | 実際にフォーム営業を実施するユーザー（100-300名想定） |
| **企業** | 営業活動を依頼し、進捗・分析結果を確認するユーザー（50-100社想定） |
| **管理者** | システム全体を管理し、アカウント・リスト管理を行うユーザー（5名想定） |
| **営業リスト** | フォーム営業の対象となる企業・問い合わせ先のリスト（最大10,000件/リスト） |
| **進捗** | 送信件数、返信件数、アポ獲得数などの営業活動状況 |
| **分析レポート** | 返信率、成約率、時間帯別・曜日別効果などの分析結果 |
| **多対多関係** | 1企業が複数ワーカーを持ち、1ワーカーが複数企業を担当する関係 |
| **リスト内重複チェック** | 同一リスト内で重複する営業先を検出する機能 |
| **P95応答時間** | 95パーセンタイル応答時間（95%のリクエストが指定時間以内に完了） |
| **RBAC** | Role-Based Access Control（ロールベースアクセス制御） |
| **トレースID** | リクエストごとに付与される一意のID。ログ追跡に使用 |
